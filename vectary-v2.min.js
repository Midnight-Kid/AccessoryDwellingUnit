import{VctrApi}from"https://www.vectary.com/viewer-api/v1/api.js";var switchingInProgress=!1;async function run(){function errHandler(err){}async function onReady(){console.log(await vA.getObjects());const allSceneCameras=await vA.getCameras();console.log("Cameras",allSceneCameras);const allSceneMaterials=await vA.getMaterials();console.log("Materials",allSceneMaterials);var objects_hidden=[];const objectG=await vA.getObjectByName("Hide");for(var i in objects_hidden=objectG.childrenNames){var o=objects_hidden[i];const changeVisibilitySuccess=await vA.setVisibility([o],!1,!1)}for(var i in _sections){var section=_sections[i];for(var j in section){var item=section[j];if(item.object&&""!=item.object||item.group&&""!=item.group){var vectary_function=item.function?item.function.toLowerCase().replace(" ","-"):"",objects=item.object.split("|"),group=item.group;if(""!=group){var groups=group.split("|");const objectG=await vA.getObjectByName(groups[0]);var objectGS;if(objects=objectG.childrenNames.join(","),groups.length>1)objects=objects+"|"+(await vA.getObjectByName(groups[1])).childrenNames.join(",");objects=objects.split("|")}if(0==item.active&&"object-visibility"===vectary_function){var primary=objects[0].split(",");for(var k in primary){var o=primary[k];const changeVisibilitySuccess=await vA.setVisibility([o],!1,!1)}}if(1==item.active&&"material-change"===vectary_function){var material=item.material&&""!=item.material?item.material.split("|"):[],color=material.length>1?material[1]:null;for(var i in material=material.length>0?material[0]:"",objects=objects[0].split(",")){var object=objects[i];const changeMaterialSuccess=await vA.setMaterial(object,material);if(color)var colorChangeResult=await vA.updateMaterial(material,{color:color})}}}}}}vA=new VctrApi("test",errHandler);try{await vA.init()}catch(e){}onReady()}$(".material-change").click((async function(){var material=$(this).data("material"),group=$(this).data("group"),color=null;material&&(color=(material=material.split("|")).length>1?material[1]:color,material=material[0]);var objects=$(this).data("object");if(objects&&(objects=objects.split(",")),""!=group){const objectG=await vA.getObjectByName(group);objects=objectG.childrenNames}for(var i in objects){var object=objects[i];const changeMaterialSuccess=await vA.setMaterial(object,material);if(console.log(changeMaterialSuccess),color)var colorChangeResultt=await vA.updateMaterial(material,{color:color})}})),$(".object-visibility").click((async function(){var visibility=$(this).hasClass("selected"),objects=$(this).data("object"),group=$(this).data("group");if(""!=group){var groups=group.split("|");const objectG=await vA.getObjectByName(groups[0]);var objectGS;if(objects=objectG.childrenNames.join(","),groups.length>1)objects=objects+"|"+(await vA.getObjectByName(groups[1])).childrenNames.join(",")}if(objects){var primary=(objects=objects.split("|"))[0].split(","),secundary=objects.length>1?objects[1].split(","):[];for(var i in primary){var object=primary[i];const changeVisibilitySuccess=await vA.setVisibility([object],visibility,!1)}for(var i in secundary){var object=secundary[i];const changeVisibilitySuccess=await vA.setVisibility([object],!1,!1)}}})),$(".full-width-button, .btn-slides a").click((async function(){var uri=window.location.href;if(uri=uri.split("#")[1],views[uri]){var view=String(views[uri]),fov=null;""!=view&&(fov=(view=view.split("|")).length>1?view[1]:null,view=view[0]),switchingInProgress||(switchingInProgress=!0,fov&&await vA.setFOV(fov),await vA.switchViewAsync(view),switchingInProgress=!1)}})),run();